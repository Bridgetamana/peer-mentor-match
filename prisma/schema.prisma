generator client {
  provider = "prisma-client-js"
}

datasource db {
  provider = "sqlite"
  url      = env("DATABASE_URL")
}

enum Role {
  learner
  tutor
}

model UserProfile {
  id        Int      @id @default(autoincrement())
  userId    String   @unique
  role      Role
  completed Boolean  @default(true)
  data      Json?
  email     String?
  createdAt DateTime @default(now())
  updatedAt DateTime @updatedAt

  @@unique([role, email])
}

enum MatchStatus {
  pending
  accepted
  rejected
  canceled
}

model MatchRequest {
  id           Int         @id @default(autoincrement())
  learnerEmail String
  tutorEmail   String
  subject      String?
  note         String?
  status       MatchStatus @default(pending)
  createdAt    DateTime    @default(now())
  updatedAt    DateTime    @updatedAt

  @@index([learnerEmail])
  @@index([tutorEmail])
}

model Connection {
  id           Int      @id @default(autoincrement())
  learnerEmail String
  tutorEmail   String
  createdAt    DateTime @default(now())

  @@unique([learnerEmail, tutorEmail])
  @@index([learnerEmail])
  @@index([tutorEmail])
}